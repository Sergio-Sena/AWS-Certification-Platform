name: Deploy AWS Certification Platform

# Deploy desabilitado temporariamente
# on:
#   push:
#     branches: [ main ]
#   workflow_dispatch:

# Workflow manual apenas
on:
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Validate HTML
      run: |
        echo "âœ… Validating HTML files..."
        find . -name "*.html" | head -5
        
    - name: Check 80% pass score
      run: |
        if grep -r "80%" --include="*.js" .; then
          echo "âœ… 80% pass score confirmed"
        else
          echo "âŒ 80% pass score not found"
          exit 1
        fi
        
    - name: Deploy to Production
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./
        
    - name: Notify Success
      if: success()
      run: |
        echo "ğŸš€ Deploy realizado com sucesso!"
        echo "ğŸ“Š CritÃ©rio 80% validado"
        echo "ğŸŒ Site disponÃ­vel em produÃ§Ã£o"